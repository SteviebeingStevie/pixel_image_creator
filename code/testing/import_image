from PIL import Image
from matplotlib import pyplot as plt

def load_image(image_path):
    """
    Lädt ein Bild von einem Pfad und gibt das Bildobjekt zurück.
    
    Arguments:
    image_path -- Pfad des Bildes
    """
    try:
        # Bild einlesen
        image = Image.open(image_path)
        return image
    except FileNotFoundError:
        print("Datei nicht gefunden.")
        return None
    except Exception as e:
        print(f"Fehler beim Laden des Bildes: {e}")
        return None


def information_image(image_object):
    """
    Takes an image as input and returns the Format, Color-Code and the size as a dictionary.
    
    Keyword arguments:
    image_object -- loaded image object
    """

    # Dateiformat abrufen
    image_format = image_object.format
    # Farbkodierung abrufen
    image_color_code = image_object.mode
    # Bildmasse erhalten
    width, height = image_object.size
    return {
        "format" : image_format,
        "color_code" : image_color_code,
        "size [x, y]" : (width, height)
        }

def show_image(image_object):
    """
    Displays an image.

    Keyword arguments:
    image_object -- loaded image object
    """
    plt.imshow(image_object)
    plt.axis('off')
    plt.show()

def resize_image(image_object, new_width, new_height):
    
    # Bildgröße ändern
    return image_object.resize((new_width, new_height))


# resize image with ratio
def resize_by_ratio(image_object, resize_percentage):
    width, height = image_object.size
    ratio = width / height

    new_width = round(resize_percentage / 100 * width)
    new_height = round(new_width / ratio)
    
    return resize_image(loaded_image, new_width, new_height)

   



# Informationen ausgeben
print("-"*30)
loaded_image = load_image("images/before/proxy-image.jpeg")
print(information_image(loaded_image))



#resized_image = resize_image(loaded_image, 33, 47)


resized_image = resize_by_ratio(loaded_image, 5)
show_image(resized_image)


#show_image(resized_image_2)

# Bild speichern
resized_image.save("images/after/Bild2.jpg")
print("-"*30)